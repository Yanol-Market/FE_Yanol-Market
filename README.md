# ![최종 로고](https://github.com/Yanol-Market/frontend/assets/51106050/552ff865-e2b3-4127-b0c8-88e8741eca24)

- 📅 기간: 2023.12.06 ~ 2024.1.30
- 🧭 주제: 취소 수수료 없는 숙소 양도 거래 서비스
  ![image](https://github.com/Yanol-Market/frontend/assets/51106050/0742ac22-c6a8-47a2-9e1f-e2f7a73da05a)

## 🌐 배포 주소

- 🎫 배포 주소 : https://golden-ticket6.netlify.app/
- 🧩 테스트 계정 :

## 👭 참여 인원 및 담당 기능

### PM 팀

<table>
  <thead>
    <tr>
      <th align="center"> 팀장 | 이예은 </th>
      <th align="center"> 팀원 | 김나우 </th>
      <th align="center"> 팀원 | 박경은 </th>
      <th align="center"> 팀원 | 안호정 
      </th>
      <th align="center"> 팀원 | 정유경 </th>
    </tr>

  </thead>
</table>

### UX/UI 팀

<table>
  <thead>
    <tr>
      <th align="center"> 팀장 | 최효준 </th>
    </tr>
  </thead>
</table>

### FE 팀

<table>
  <thead>
    <tr>
      <th align="center"> 팀장 | 정효주 </th>
      <th align="center"> 팀원 | 김소정 </th>
      <th align="center"> 팀원 | 배경규 </th>
      <th align="center"> 팀원 | 장문용 </th>
      <th align="center"> 팀원 | 진종수 </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/hhjs2">
          <img src="https://avatars.githubusercontent.com/u/102405617?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/KSJT">
          <img src="https://avatars.githubusercontent.com/u/118329943?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/kyungkyuBae">
          <img src="https://avatars.githubusercontent.com/u/131759810?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
        <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/moonyah">
          <img src="https://avatars.githubusercontent.com/u/51106050?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
      <td align="center">
         <a target="_blank" rel="noopener noreferrer nofollow" href="https://github.com/jongsujin">
          <img src="https://avatars.githubusercontent.com/u/78890707?v=4" width="100" style="max-width: 100%;">
        </a>
      </td>
    </tr>
    <tr>
      <td align="center">
        <a href="https://github.com/hhjs2">@hhjs2</a>
      </td>
      <td align="center">
         <a href="https://github.com/KSJT">@KSJT</a>
      </td>
      <td align="center">
        <a href="https://github.com/kyungkyuBae">@kyungkyuBae</a>
      </td>
      <td align="center">
        <a href="https://github.com/moonyah">@moonyah</a>
      </td>
      <td align="center">
        <a href="https://github.com/jongsujin">@jongsujin</a>
      </td>
    </tr>
    <tr>
      <td>
        <ul>
          <li>초기 개발 세팅</li>
          <li>거래 내역 페이지(판매 내역, 구매 내역)</li>
          <li>상품 수정 페이지</li>
          <li>알림 내역 페이지</li>
          <li>CI/CD</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>네고 페이지(채팅)</li>
          <li>결제 페이지</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>메인 페이지</li>
          <li>검색 페이지</li>
          <li>숙소 상세 페이지</li>
          <li>하단 NAV</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>상품 등록 페이지 (상품 선택, 상품 정보 입력, 약관 동의)</li>
          <li>나의 거래 페이지 (채팅 목록)</li>
        </ul>
      </td>
      <td>
        <ul>
          <li>MSW 및 jest 셋팅</li>
          <li>로그인 / 회원가입 페이지</li>
          <li>마이페이지</li>
          <li>결제 기능 구현</li>
          <li>404 NotFound 페이지 </li>
          <li>스플래시 페이지</li>
        </ul>
      </td>
    </tr>

  </tbody>
</table>

### BE 팀

<table>
  <thead>
    <tr>
      <th align="center"> 팀장 | 박찬영 </th>
      <th align="center"> 팀원 | 김수빈 </th>
      <th align="center"> 팀원 | 서은 </th>
      <th align="center"> 팀원 | 이의인 </th>
      <th align="center"> 팀원 | 전유림 </th>
  </thead>
</table>

[📃 API 명세서](https://www.notion.so/API-1aa144a86fb8406ab3a4d16415cb4c75)

## ✒ 기획 및 디자인

[🎨 골든티켓 GUI](https://www.figma.com/file/Q2Enp3xLkgeIZ1iuEVRRD4/%EA%B3%A8%EB%93%A0%ED%8B%B0%EC%BC%93-gui%EC%9E%91%EC%97%85?type=design&node-id=125-345&mode=design&t=XrsSoY0XgsUPfkUP-0) <br/>
[🪟 골든티켓 와이어프레임](<https://www.figma.com/file/mAkEo5jHXpP0TNedW0XcjE/%EA%B3%A8%EB%93%A0%ED%8B%B0%EC%BC%93-%EC%99%80%EC%9D%B4%EC%96%B4%ED%94%84%EB%A0%88%EC%9E%84_(%EC%A3%BC)%EC%95%BC%EB%86%80%EC%9E%A5%ED%84%B0?type=design&mode=design&t=dAwVOsPk6aPYDzTn-0>)

## 🔍️ 기술 스택

### FE 개발

<div style="display: flex;">
  <img src="https://img.shields.io/badge/react-%2320232a?style=for-the-badge&logo=react&logoColor=%2361DAFB" />
  <img src="https://img.shields.io/badge/typescript-%23007ACC.svg?style=for-the-badge&logo=typescript&logoColor=white" />
  <img src="https://img.shields.io/badge/Recoil-3578E5?style=for-the-badge&logo=Recoil&logoColor=white" />
</div>

### 협업 툴

<div>
 <img src="https://img.shields.io/badge/github-181717?style=for-the-badge&logo=github&logoColor=white" />
 <img src="https://img.shields.io/badge/Slack-4A154B?style=for-the-badge&logo=Slack&logoColor=white" />
</div>

### 배포

 <img src="https://img.shields.io/badge/Netlify-00C7B7?style=for-the-badge&logo=Netlify&logoColor=white" />

## 👨‍👨‍👦‍👦 협업 프로세스

커밋 컨벤션, 코딩 컨벤션, 깃허브 규칙 등의 내용은 아래의 노션 페이지를 참고해주세요! </br>

### [🔗 노션 페이지](https://www.notion.so/FE-34c0feed0c03472894f45fc1bdccf37b?pvs=4) </br>

## 💻 팀원별 구현 기능 및 회고

<details>
<summary style="font-size: 16px">정효주</summary>

## 작업 내용

## 트러블 슈팅

1. **use쿼리 함수 작성 시 일치하는 오버로드가 없다는 에러 발생**

   쿼리를 정의하는 use쿼리 함수를 작성하면서, 이전에는 존재하지 않았던 "일치하는 오버로드가 없다"는 에러가 발생했다. 이 에러는 리액트 쿼리 버전 업데이트로 인해 발생한 것으로 최근 텐스탁에서 제공하는 리액트 쿼리는 5버전이 사용되고 있었다. 하지만 작성 중이였던 코드는 이전 버전인 리액트 쿼리 3버전을 기반으로 하고 있었고 공식문서를 참고해 리액트 쿼리 5버전으로 적용 시켜줬다.

   - **쿼리 키 작성 시 배열 형식 사용**
   - **QueryFn, QueryKey 객체 사용**

## 회고

</details>
<details>

<summary style="font-size: 16px">김소정</summary>

## 작업 내용

### 네고 채팅 구현

- 상품 상세 페이지에서 네고하기 버튼을 누르면 채팅방이 생성되고 생성된 채팅방으로 이동합니다.
- 네고가 2번 거절 당한 사용자를 제외한 사용자에게는 네고가를 제시할 수 있는 네고 제시 창을 띄워줍니다.
- 구매자가 네고를 제시하면 네고 생성 api를 요청하고 네고 제시 유저 메시지와 시스템 메시지를 서버로 보냅니다.
- useQuery 폴링 방식을 적용하여 1초마다 채팅방을 상세 조회하고, 조회된 데이터를 바탕으로 사용자에게는 실시간으로 전송된 메시지와 상품 판매 상태를 노출시킵니다.
- 구매자가 결제를 진행하고 이때 결제가 성공하면 유저 메시지와 시스템 메시지를 서버로 보내며, 구매자를 채팅방으로 이동시킵니다. 직후 채팅방에서는 상품의 양도 가능 상태를 조회하여 판매자에게 양도 신청 창을 띄워줍니다.
- 양도가 완료되면 양도가 완료된 상태값을 조회해 채팅방 유저에게 양도가 완료되었음을 알려줍니다.
- 기본적으로 네고와 결제, 양도 과정에서 사용자의 액션에 따라 발생할 수 있는 모든 시나리오에 적합한 채팅방 UI를 구현하고 시스템 메시지와 유저 메시지를 전송하는 기능을 구현했습니다.

### 결제 페이지 퍼블리싱

- 약관 동의 바텀 시트에서 약관 중 하나라도 동의하지 않으면 전체 동의가 해제됩니다.
- 결제 20분 타임 아웃 시에 채팅방으로 다시 이동합니다.

## 회고

- 마지막까지 기획이 변경되고 백엔드의 로직이 바뀌며 받아와야 하는 데이터의 값이 바뀌는 상황에서 프론트 작업을 빠르게 쳐내야 하는 경험을 할 수 있었습니다.
- 실시간으로 계속 코드와 로직을 바꿔야 했기 때문에 재사용가능한 코드를 작성하는 데에는 미흡했지만 백엔드와 어떻게 협업해야 하는지에 대한 이해도가 높아진 것 같습니다.
- 함께 끝까지 애써준 채팅 담당 BE팀원분과 FE팀원들 전체에게 정말 감사합니다.

</details>
<details>
<summary style="font-size: 16px">배경규</summary>

## 작업 내용

## 트러블 슈팅

## 회고

</details>
<details>
<summary style="font-size: 16px">장문용</summary>

## 작업 내용

### 1. 상품 등록 페이지

- 로그인 후 계좌 등록 시, 상품 등록이 이동 가능합니다.

#### 1-1. 상품 선택

- 로그인 여부를 판별하고 계좌 등록 여부를 판별합니다.
- 야놀자 로그인으로 예약된 상품 목록을 불러옵니다.
- 골든티켓에 등록할 상품을 선택합니다.
  ![상품등록01](https://github.com/Yanol-Market/frontend/assets/51106050/2885634c-d093-47d2-b318-2542513f1ffb)

#### 1-2. 상품 정보 입력

- 선택한 상품을 골든티켓에 등록하기 위해 정보를 입력합니다.
- 판매 희망 가격과 판매자 한마디를 입력합니다.
  ![상품등록02](https://github.com/Yanol-Market/frontend/assets/51106050/a5a06637-09fe-4c86-a466-32a0fba26a15)

#### 1-3. 약관 동의

- 약관에 동의하고 완료를 하면 앞서 입력한 정보로 선택한 상품이 등록됩니다.
- 이미 등록된 상품은 비활성화 처리됩니다.
  ![상품등록03](https://github.com/Yanol-Market/frontend/assets/51106050/27374217-fbb6-49bd-97c1-351d0715bb86)
  ![비활성화처리](https://github.com/Yanol-Market/frontend/assets/51106050/9ab7e2c1-62d0-4f2e-854e-652f010a7964)

### 2. 나의 거래 페이지

- 로그인 상태이면 채팅 목록이 표시됩니다.
- 상대방 닉네임, 최근 메시지, 최근 메시지 시간, 호텔 이름 등이 표시되고 확인 유무에 따라 다른 UI를 구현하였습니다.
- dropdown으로 전체 내역, 구매 내역, 판매 내역을 선택해서 확인할 수 있습니다.
  ![나의거래01](https://github.com/Yanol-Market/frontend/assets/51106050/1fa37846-85b5-42d5-bb69-a50b32efa19f)
  ![나의거래03](https://github.com/Yanol-Market/frontend/assets/51106050/dac5c932-2ca6-449a-be21-37aaba4c32cb)

</details>
<details>
<summary style="font-size: 16px">진종수</summary>

## 작업 내용

### 1. 로그인

- 이메일 혹은 비밀번호를 잘못 입력 했을 시 에러를 띄어주는 유효성 검증을 진행 했습니다.
- 비밀번호를 잊어버렸을 때 가입한 이메일로 임시 비밀번호를 보내주는 기능을 구현 했습니다.
- 서비스에서 상품 등록 시 필요한 야놀자 로그인을 구현 했습니다.
- 로그인 없이 홈 화면을 둘러볼 수 있게 했습니다.
- 또한 쿠키로 accessToken 과 refreshToken 을 관리 했고 axios interceptor로 토큰 재발급 처리와 헤더에 토큰이 자동으로 들어갈 수 있게 처리 했습니다.
  ![signinfinal](https://github.com/Yanol-Market/frontend/assets/78890707/05d819b6-cc1b-4788-aced-f0017f81380b)

### 2. 회원가입

- 필수 입력사항을 입력하지 않을 시 버튼이 비활성화 되게 했습니다.
- 닉네임과 이메일 중복 조회가 이루어지게 했습니다.
- react-hook-form 라이브러리를 활용하여 입력 사항에서 주어진 조건에 맞지 않게 입력 시 에러를 띄어주며 유효성 검증을 진행 했습니다.
  ![signup2](https://github.com/Yanol-Market/frontend/assets/78890707/cf71a2c4-b0fe-4790-a0cc-d5facdf0c4ed)

### 3. 마이페이지

- 로그인 유무를 판별할 수 있게 쿠키에 토큰이 존재하는 지 여부에 따라 다른 화면을 보여주게 했습니다.
  ![로그인전](https://github.com/Yanol-Market/frontend/assets/78890707/c30ae738-cb01-41e5-848a-f1aba8480b06)
  ![로그인후](https://github.com/Yanol-Market/frontend/assets/78890707/00a76a05-c1f4-425f-b17a-27f5133ae6d9)
- 로그인 후 프로필 수정 페이지를 통해 닉네임을 변경할 수 있습니다.
  ![닉네임변경](https://github.com/Yanol-Market/frontend/assets/78890707/f7b0c4d6-31bd-43d3-8d13-b60da3f279cd)
- 찜한 상품 페이지에서 내가 찜한 상품을 보고 상세 페이지로 이동 가능하며 삭제 또한 가능합니다.
  ![wishes](https://github.com/Yanol-Market/frontend/assets/78890707/75cbc38f-67aa-4ca9-a263-831896f20f5d)
- 관심 지역 페이지에서 내가 원하는 관심 지역을 총 3개까지 선택할 수 있습니다.
  ![interestRegion](https://github.com/Yanol-Market/frontend/assets/78890707/d3eb2746-8db1-4ba8-9a89-ff5523e31806)
- 내 계좌 페이지에서 내 계좌를 확인 할 수 있으며 없으면 등록 가능합니다.
  ![selectbanks](https://github.com/Yanol-Market/frontend/assets/78890707/b683e6d7-649d-4439-b26e-5de81b5f74b2)
- 계정 관리 페이지에서 비밀번호 변경 , 로그아웃 , 회원탈퇴를 할 수 있습니다.
  ![ed![withdrawl](https://github.com/Yanol-Market/frontend/assets/78890707/19337234-20ca-4291-9a6c-68e045799af6)
itPasswords](https://github.com/Yanol-Market/frontend/assets/78890707/6051af24-e756-49b6-957d-5a31bbe3419f)

### 4. 결제 기능 구현

- 상품 상세페이지에서 예약하기를 누르거나 네고 후 결제를 진행 할 시 PG사 연동을 통해 실제 결제를 가능하게 구현 했습니다. 또한 결제 사전 검증 , PG사 결제 후 백엔드와 올바르게 결제가 됐는 지 사후검증을 진행했습니다. 그 후 사후검증에서 받은 값을 기반으로 결제 완성 , 실패 , 시간초과 페이지를 각각 다르게 보여줍니다.
  ![pay](https://github.com/Yanol-Market/frontend/assets/78890707/35796dd0-8701-432b-a03b-4fda1a9cfdd2)

### 5. 404 Not Found 및 스플래시 페이지 퍼블리싱

![303](https://github.com/Yanol-Market/frontend/assets/78890707/e63f2b51-baa9-41d6-93c0-c1dd609ede15)
![splash](https://github.com/Yanol-Market/frontend/assets/78890707/7e7c7d50-ba76-47ac-9d94-ca3929f10d3a)

### 6. MSW 및 Jest 셋팅

- 백엔드와의 API 연동 전 프론트엔드에서도 테스트가 필요하기 때문에 MSW와 Jest를 사용해서 테스트를 진행 했습니다.

### 7. BottomSheet 공통 컴포넌트

- 바텀시트를 공통컴포넌트로 구현하여 팀 작업 시 효율성을 높이고자 했습니다.

## 트러블 슈팅

결제 페이지를 구현할 때 결제 전 백엔드와 사전 검증 API를 통해 사전 검증을 마친 데이터를 State에 담아서 PG사 결제 창을 여는 요청에 보냈는데 이 과정에서 state에 담기는 데이터가 undefined로 인식되는 경우가 종종 있어 결제 창이 열리지 않는 문제가 발생 했다.
⇒ 사전 검증을 마친 데이터를 tanstack-query(useMutaion)으로 받아와서 캐싱된 데이터를 PG사 결제 요청에 담아서 보냈더니 에러가 해결 됐다.

## 회고

부트캠프 마지막 프로젝트였는데 FE,BE,PM 다 같이 참여하는 규모의 프로젝트를 경험 할 수 있게 되어서 너무 좋았고 기획 단계에서 많은 노력과 시간이 듦을 배웠고 촉박한 개발 시간임에도 함께 열심히 좋은 결과물을 가져가게 해준 FE팀원들에게 감사하고 많이 배운 프로젝트였다. 개인적으로는 실제 결제까지 진행 해보면서 많은 점을 느꼈고 많은 기능을 다양하게 작업해볼 수 있던 유익한 기회였던 것 같다. 특히 로그인 시 Token과 Cookie를 살펴볼 수 있는 좋은 계기였고 또한 axios interceptor 에 대해서도 배울 수 있던 좋은 시간이였다.

</details>
